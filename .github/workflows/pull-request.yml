name: Documents

on: 
  workflow_dispatch:

  repository_dispatch:
    types:
      - Document

env:
  GH_TOKEN: ${{ github.token }}

jobs:
  update-document:
    runs-on: ubuntu-latest
    name: Extract Data
    if: github.event.action == 'Document'
    steps:
      - name: Checkout Repository
        uses: actions/checkout@v3
      
      - name: Create pull request
        run: |
          echo "Create pull request to another repos"
          pr_exists=$(gh pr list --state open | grep -qw "Auto-updated documents" && echo "found" || echo "not found")          
          if [ "$pr_exists" == "not found" ]; then
            # Pull request not exist
            echo "Pull request not found. Creating a new one..."
            gh pr create \
            --base master --head htv3hc/feat/auto-update-doc \
            --title "Auto-updated documents" \
            --body "This PR was automatically generated by GitHub Actions." \
            --assignee huavanthong \
            --reviewer huavanthong 
          else
            # Pull request đã tồn tại, thông báo và không thực hiện thêm hành động
            echo "Pull request already exists. Skipping..."
          fi
         